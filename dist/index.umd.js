!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).rovingUx={})}(this,function(e){var t={LEFT:37,UP:38,RIGHT:39,DOWN:40},n=new Map,r=function(e){var t=e.target;n.get("last_rover")!=t&&n.has(t)&&(d(t,n.get(t).active),n.set("last_rover",t))},o=function(e){var n=e.target;switch(e.keyCode){case t[isRtl?"LEFT":"RIGHT"]:case t.DOWN:e.preventDefault(),i(n);break;case t[isRtl?"RIGHT":"LEFT"]:case t.UP:e.preventDefault(),c(n)}},a=new MutationObserver(function(e,t){e.forEach(function(e){e.removedNodes.length>0&&e.removedNodes.forEach(function(e){if(n.has(e)){var t,i=n.get(e);e.removeEventListener("focusin",r),e.removeEventListener("keydown",o),n.delete(e),i.targets.forEach(function(e){return e.tabIndex=""}),0===(null==(t=[].concat(n.keys()))?void 0:t.filter(function(e){return"last_rover"!==e})).length&&(n.clear(),a.disconnect())}})})}),i=function(e){var t=n.get(e);t.index+=1,t.index>t.targets.length-1&&(t.index=t.targets.length-1);var r=t.targets[t.index];r&&d(e,r)},c=function(e){var t=n.get(e);t.index-=1,t.index<1&&(t.index=0);var r=t.targets[t.index];r&&d(e,r)},d=function(e,t){var r=n.get(e);r.active.tabIndex=-1,r.active=t,r.active.tabIndex=0,r.active.focus()};e.rovingIndex=function(e){var t=e.element,i=e.target;window.getComputedStyle(document.documentElement);var c=t.querySelectorAll(i||":scope *"),d=c[0];t.tabIndex=-1,c.forEach(function(e){return e.tabIndex=-1}),d.tabIndex=0,n.set(t,{targets:c,active:d,index:0}),t.addEventListener("focusin",r),t.addEventListener("keydown",o),a.observe(document,{childList:!0,subtree:!0})}});
//# sourceMappingURL=index.umd.js.map
